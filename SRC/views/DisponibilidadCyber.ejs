<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Disponibilidad de computadoras</title>
    <link rel="stylesheet" href="/CSS/DisponibilidadCyber.css" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-2">
            <div class="sidebar">
                <div class="logo_content">
                    <div class="logo">
                        <div class="row">
                            <div class="col">
                                <i class="bi bi-pc"></i>
                            </div>
                            <div class="col">
                                <div class="logo_name">Cyber</div>
                            </div>
                        </div>
                    </div>
                    <i class='bx bx-menu-alt-left' id="btn"></i>
                </div>
                <ul class="nav_list">
                    <li class="my-1">
                        <a href="">
                            <i class="bi bi-pc-display-horizontal"></i>
                            <span class="links-name">Disponibilidad</span>
                        </a>
                        <span class="tooltip">Disponibilidad</span>
                    </li>
                    <li class="my-1">
                        <a href="/Operis/CyberDisp/GestionEquipos">
                            <i class="bi bi-gpu-card"></i>
                            <span class="links-name">Gestionar equipos</span>
                        </a>
                        <span class="tooltip">Gestionar equipos</span>
                    </li>
                    <li class="my-1">
                        <a href="/Operis/direct">
                            <i class='bx bx-log-out' ></i>
                            <span class="links-name">Salir</span>
                        </a>
                        <span class="tooltip">Salir</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-10">
            <div class="row text-end">
                <i id="usericon" class='bx bx-user-circle bx-lg mt-2' style='color:#023f58'  ></i>
            </div>
            <div class="row text-center">
                <h2 class="mb-3">Disponibilidad</h2>
            </div>
            <div class="row">
                <div class="table-responsive">
                    <table class="table text-center">
                        <thead id="headers" class="align-middle text-center">
                        <tr>
                            <th>Equipo</th>
                            <th>Estado</th>
                            <th>Tiempo de inicio</th>
                            <th>Tarifa</th>
                            <th>Accion</th>
                        </tr>
                        </thead>
                        <tbody id="datostabla" class="align-middle text-center">
                        <%
                        for (let i in comp){
                            %>
                        <tr>
                            <td></td>
                            <td>Disponible/rentada</td>
                            <td>
                                <div id="timer">
                                    No esta en uso.
                                </div>
                                <%
                                if (!comp[i].hr_compu == "sin hora"){
                                    %>
                                    <script>
                                        var countdowndate = new Date ("<%comp[i].hr_compu%>").getTime();
                                        var x = setInterval(function () {
                                        var now = new Date().getTime();
                                        var distance = countdowndate - now;

                                        var hours =  Math.floor((distance % (1000 * 60 * 24)) / (1000 * 60 * 60));
                                        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                                        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                                        document.getElementById("timer").innerHTML = `${hours}h ${minutes}m ${seconds}s`;

                                        if (distance < 0){
                                            clearInterval(x);
                                            document.getElementById("timer").innerHTML = "Tiempo expirado";
                                        }
                                        }, 1000);
                                    </script>
                                <%
                                }
                                %>
                            </td>
                            <td>$15/30min</td>
                            <td>
                                <form action="">
                                    <button class="btn btn-secondary mb-2" style="">Empezar renta</button>
                                </form>
                                <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalForm" id="openmodal">Finalizar renta</button>
                            </td>
                        </tr>
                        <%
                        }
                        %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
    <div class="modal fade"  id="modalForm" tabindex="-1" aria-labelledby="modalFormLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4">
                <div class="modal-header" id="popupHeader">
                    <h4>Finalizar renta</h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row text-center">
                            <i class="bi bi-pc-display icon"></i>
                            <h5>ID</h5>
                            <div class="row mt-2">
                                <div class="col"></div>
                                <div class="col">
                                    <input type="text" class="form-control" placeholder="id de compu" disabled>
                                </div>
                                <div class="col"></div>
                            </div>
                            <h5>Hora de inicio de renta</h5>
                            <div class="row mt-2">
                                <div class="col"></div>
                                <div class="col">
                                    <input type="time" class="form-control" disabled>
                                </div>
                                <div class="col"></div>
                            </div>
                            <h5>Hora de finalizacion de renta</h5>
                            <div class="row mt-2">
                                <div class="col"></div>
                                <div class="col">
                                    <input type="time" class="form-control" disabled>
                                </div>
                                <div class="col"></div>
                            </div>
                            <h5>Tarifa</h5>
                            <div class="row mt-2">
                                <div class="col"></div>
                                <div class="col">
                                    <input type="text" class="form-control" placeholder="tarifa" disabled>
                                </div>
                                <div class="col"></div>
                            </div>
                            <h5>Total a pagar</h5>
                            <div class="row mt-2">
                                <div class="col"></div>
                                <div class="col">
                                    <input type="text" class="form-control" placeholder="dinerito">
                                </div>
                                <div class="col"></div>
                            </div>
                            <div class="row mt-3">
                                <div class="col"></div>
                                <div class="col">
                                    <button class="btn btn-outline-danger" data-bs-dismiss="modal">Salir</button>
                                </div>
                                <div class="col"></div>
                                <div class="col">
                                    <form action="">
                                        <button class="btn btn-outline-secondary">Finalizar</button>
                                    </form>
                                </div>
                                <div class="col"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script>
    //sidebar
    let btn = document.querySelector("#btn");
    let sidebar = document.querySelector(".sidebar");

    btn.onclick = function (){
        sidebar.classList.toggle("active");
    }
    //other things


</script>
</body>
</html>